function addOnloadEvent(dom,callback,fail){if(dom&&typeof dom.onload!=="undefined"){dom.onload=function(){this.onload=null;this.onerror=null;setTimeout(function(){callback()},0)};dom.onerror=function(){this.onload=null;this.onerror=null;setTimeout(function(){callback()},0)}}else{if(dom){dom.onreadystatechange=function(event){if(this.readyState=="complete"||this.readyState=="loaded"){this.onreadystatechange=null;setTimeout(function(){callback()},0)}}}}}function isArray(object){return object&&typeof object==="object"&&Array==object.constructor}function trimUrl(str){if(str){var ret=str.match(/^\s*(\S*)\s*$/),retS;if(ret){retS=ret[1].match(/(.*)\?+$/);if(retS){return retS[1]}else{return ret[1]}}}return str}function isNoStorage(){var userAgent=window.navigator.userAgent.toLowerCase();return !(userAgent.match(/snyifubao|ebuy-snyifubao/)&&userAgent.match(/android/))}var compose={constant:{CSS:"css",JS:"js",PARAl:"paral",ASYNC:"async"},_config:{basePath:"",contextPath:false,paths:{},storage:isNoStorage()===false?false:true},_process:[],_satisfies:[],_completedPaths:{},_onLoadEvents:[],_storageKey:"storage-param-",isElement:function(obj){return !!(obj&&obj.nodeType===1)},isArray:function(obj){return toString.call(obj)==="[object Array]"},isObject:function(obj){var type=typeof obj;return type==="function"||type==="object"&&!!obj},cacheStorage:{},_delayer:{time:0,used:false,push:function(callback,time){var self=this;this.used=true;this._callback=function(){if(callback){callback()}self._timer=null;self._callback=null};this.time=time||0;this._timer=setTimeout(this._callback,this.time)},delay:function(time){if(this._timer){clearTimeout(this._timer)}if(this._callback){if(time!==undefined){this._timer=time}this._timer=setTimeout(this._callback,this.time)}}},init:function(){this.initConfig();this.initLoad();this.initAndClearStorage()},initConfig:function(){var _config=this._config,scripts=document.getElementsByTagName("script"),l=scripts.length,script,contextPath,basePath,param,main;for(var i=0;i<l;i++){script=scripts[i];contextPath=script.getAttribute("data-contextpath")||"";basePath=script.getAttribute("data-basepath")||"";param=script.getAttribute("data-param")||"";main=script.getAttribute("data-main")||"";if(contextPath||basePath||main||param){_config.contextPath=contextPath;_config.basePath=basePath;_config.param=param;_config.main=main;break}}},initLoad:function(){var main=this._config.main;if(main){var main=main.split(",");this.require(main)}},config:function(opt){var _config=this._config;extend(_config,opt,true);_config.contextPath=_config.contextPath||"";_config.basePath=_config.basePath||"";_config.param=_config.param||"";if(opt.storage&&isNoStorage()===false){_config.storage=false}},getContext:function(opt){return this._config.contextPath},require:function(pathId,requires,success,fail,existObjectNames){this.req(pathId,requires,success,fail,existObjectNames)},async:function(pathId,requires,success,fail,existObjectNames){this.req(pathId,requires,success,fail,existObjectNames,{method:this.constant.ASYNC})},paral:function(pathId,requires,success,fail,existObjectNames){this.req(pathId,requires,success,fail,existObjectNames,{method:this.constant.PARAl})},req:function(pathId,requires,callback,fail,existObjectNames,opts){this._delayer.delay();if(isArray(pathId)||typeof pathId==="function"){existObjectNames=fail;fail=callback;callback=requires;requires=pathId;pathId=null}if(typeof requires==="function"){existObjectNames=fail;fail=callback;callback=requires;requires=[]}if(!callback||typeof callback==="string"){callback=function(){}}if(typeof fail!=="function"){existObjectNames=fail;fail=function(){}}if(existObjectNames===true){existObjectNames=null}requires._opts=opts=opts||{};requires._existObjectNames=existObjectNames||[];if(pathId&&!pathId.match(/\.css|\.js/)){pathId+=".js"}requires.pathId=pathId;requires.callback=callback;requires.contextPath=this._config.contextPath;requires.param=this._config.param;requires.basePath=this._config.basePath;requires.fail=fail;requires.method=opts.method;var handlingRequire=this._handlingRequire,requireHandles;this.addCache(requires);if(opts.method===this.constant.PARAl){requireHandles=this.preHandleRequires(requires);return this.handleRequire(requireHandles[0])}else{if(handlingRequire){if(!handlingRequire.completed){if(opts.method!==this.constant.ASYNC&&handlingRequire.waiting){requires.parent=handlingRequire}else{requireHandles=this.preHandleRequires(requires);return requireHandles}}}}requireHandles=this.preHandleRequires(requires);if(this.handling){return}var self=this;this.handling=true;setTimeout(function(){self.handling=false;self._handlingRequire=requireHandles[0];self.handleRequire(requireHandles[0])})},satisfy:function(require){if(require){if(require.method!=this.constant.PARAl){var loadRequire=this._onLoadEvents.shift(),handlingRequire=this._handlingRequire;if(loadRequire!==handlingRequire&&(loadRequire&&loadRequire._process.length)){return}}else{var nextRequire=this.getNextRequire(require);
    if(nextRequire.type==this.constant.css&&nextRequire&&nextRequire.type==this.constant.JS){return}}if(require.type==this.constant.CSS){require.completed=true}else{if(!require.resourceObject){this.checkAndSetObjectByName(require)}}if(require.method==this.constant.PARAl){this.checkComplete(require)}else{this.excCompleteAndExcNext(require)}}},unsatisfy:function(require){if(require.method!=this.constant.PARAl){this._onLoadEvents.shift()}var requires=this.getRequires(require);if(requires.fail){requires.fail();requires.failed=true;delete require.fail}if(this._handlingRequire===require){this._handlingRequire=null}if(require.element){require.element.remove()}this.deleteRequires(require)},preHandleRequires:function(requires){var l=requires.length,callback=requires.callback,pathId=requires.pathId,existObjectNames=requires._existObjectNames,_process=requires.parent?requires.parent._process:this._process,_satisfies=requires.parent?requires.parent._satisfies:this._satisfies,i=_process.length,tailFileExp=/\.css|\.js/,path,_requires=[],count=0,type,_satisfy,require,resourceObject,configPath;for(var i=0;i<_process.length;i++){count+=_process[i].length}for(var j=0;j<=requires.length;j++){path=requires[j];configPath=this._config.paths[path];type=(configPath||path)&&(configPath||path).match(/\.css$/)?this.constant.CSS:this.constant.JS;_satisfy=_satisfies[count+j];resourceObject=_satisfy&&_satisfy.value;require={type:type,completed:_satisfy?true:false,j:j,i:i,parent:requires.parent,resourceObject:resourceObject,resourceObjectPath:existObjectNames[j],_process:[],_satisfies:[],method:type==this.constant.CSS?this.constant.PARAl:requires.method};if(path){if(path&&path.match(/^http[s]?:\/\//)){if(type==this.constant.JS&&!path.match(tailFileExp)){require.path=path+".js"}else{require.path=path}}else{if(configPath){require.path=configPath&&configPath.match(tailFileExp)?configPath:configPath+".js";if(!require.resourceObjectPath){require.resourceObjectPath=path}}else{this.handleRequirePath(require,path,requires)}}}if(j==requires.length){require.callback=callback;if(pathId){this.handleRequirePath(require,pathId,requires)}}if(_satisfy){this._completedPaths[require.path]=require}_requires.push(require)}if(pathId){this.handleRequirePath(_requires,pathId,requires)}if(requires.fail){_requires.fail=requires.fail}_process.push(_requires);return _requires},handleRequirePath:function(require,pathId,requires){var basePath=requires.basePath,contextPath=requires.contextPath,param=requires.param;require.path=this.handlePath(pathId,contextPath,basePath,param);if(!pathId.match(/\.js$|\.css$/)&&pathId.match(/\./)){require.resourceObjectPath=pathId}},handlePath:function(pathId,contextPath,basePath,param){var path,tailFileExp=/\.css|\.js/;pathId=trimUrl(pathId);if(pathId.match(/\.css$/)){path=contextPath?contextPath+"/"+pathId:pathId}else{var tpath=contextPath?contextPath+"/"+basePath:basePath;path=(tpath?tpath+"/":"")+(pathId.match(tailFileExp)?pathId:pathId+".js")}if(param){path+=pathId.match(/\.js\?/)?pathId.match(/\?$/)?param:"&"+param:"?"+param}path=path.replace(/\/+/g,"/").replace(/:\/+/,"://");return path},handleRequire:function(require){if(!require||!require.parent&&require.completed){return}var paral=require.method==this.constant.PARAl;if(!paral){this._handlingRequire=require;this.checkAndSetObjectByName(require)}if(!require.completed&&require.callback&&!paral){this.checkComplete(require)}else{if(!paral&&(!require.path||require.resourceObject||(require.completed==true&&require.type===this.constant.CSS))){this.excCompleteAndExcNext(require)}else{if(paral){var requires=this.getRequires(require);for(var i=0;i<requires.length;i++){require=requires[i];this.checkAndSetObjectByName(require);if(require.completed){this.checkComplete(require)}else{if(require.method==this.constant.PARAl){this.addEvent(require)}else{this.handleRequire(require);break}}}}else{this.addEvent(require)}}}},addEvent:function(require,elementLoad){var path=require.path;if(!elementLoad&&this._config.storage&&path&&path.match(/\.css/)){var self=this;this.getRemote(path,function(data){require.waiting=false;self.satisfy(require)},function(){self.addEvent(require,true)});return}else{if(!elementLoad&&this._config.storage&&path){var param;var storageObj=this.get(path.replace(/\?.*/,function(value){param=value;return""}),true);if(storageObj){if(require.method!=this.constant.PARAl){require.waiting=true}var callback=storageObj.callback.replace(/^function\s*[\w\d_]*\(/,"function anonymous(");this.require(storageObj.pathId,storageObj.requires?storageObj.requires.split(","):[],new Function(callback+";return anonymous.apply(null, Array.prototype.slice.apply(arguments)) \n //# sourceURL="+storageObj.pathId));return}}}if(this._onLoadEvents.some(function(item){if(item.path==require.path){return true}})){return}var element=this.createElement(require.type,path),self=this;if(!element){return}addOnloadEvent(element,function(){require.waiting=false;self.satisfy(require)},function(){require.waiting=false;self.unsatisfy(require)
    });require.element=element;var head=document.head||document.getElementsByTagName("head")[0];if(require.method!=this.constant.PARAl){this._onLoadEvents.push(require);setTimeout(function(){head.appendChild(element);require.waiting=true},0)}else{head.appendChild(element)}},createElement:function(type,path){if(!path){return}var element,config=this._config;if(type===this.constant.CSS){element=document.createElement("link");element.setAttribute("type","text/css");element.setAttribute("rel","stylesheet");element.setAttribute("href",path)}else{element=document.createElement("script");element.setAttribute("type","text/javascript");element.setAttribute("src",path);element.setAttribute("data-basepath",config.basePath)}element.setAttribute("data-contextpath",config.contextPath);return element},excCompleteAndExcNext:function(require){require.completed=true;var nextRequire=this.excCompleteAnGetNext(require);this.handleRequire(nextRequire)},excCompleteAnGetNext:function(require){this.checkComplete(require);return this.getNextRequire(require)},getNextRequire:function(require){if(!require){return}if(require._process&&require._process.length){var _process=require._process,l=_process.length;for(var i=0;i<l;i++){if(!_process[i]._called){return _process[i][0]}}}var i=require.i,j=require.j,_process=require.parent&&require.parent._process?require.parent._process:this._process,requires=_process[require.i];if(!requires){return require}else{if(j==requires.length-1||(j==0&&requires.length==0)){i+=1;j=0;requires=_process[i];if(!requires){if(require.parent){this.checkComplete(require.parent);return this.getNextRequire(require.parent)}}}else{j+=1}}var nextRequire=_process[i]&&_process[i][j];return nextRequire},checkComplete:function(require){if(!require){return}this._handling=true;var j=require.j,requires=this.getRequires(require),resources=[];if(require.method==this.constant.PARAl){var object;for(var i=0;i<requires.length;i++){require=requires[i];if(!require||!require.completed){break}else{object=require.resourceObject;if(!object){object=this.checkAndSetObjectByName(requires[i])}resources.push(object)}}if(i==requires.length-1){require.completed=true;require.callback.apply(window,resources);this.handleRequire(this.getNextRequire(require))}}else{if(requires&&(requires.length==0||j==requires.length-1)){if(require._process&&require._process.length){var _process=require._process,l=_process.length;for(var i=0;i<l;i++){if(!_process[i]._called){return}}}if(!requires._called){this.execCallback(require);if(require!==this._handlingRequire){return}if(require.parent){this.excCompleteAndExcNext(require.parent)}else{this.handleRequire(this.getNextRequire(require))}}}}},execCallback:function(require){var requires=this.getRequires(require),l=requires.length,object,resources=[];for(var i=0;i<l-1;i++){object=requires[i].resourceObject;if(!object){object=this.checkAndSetObjectByName(requires[i])}resources.push(object)}require.callbacking=true;var ret=require.callback.apply(window,resources);require.callbacking=false;require.resourceObject=ret;require.completed=true;if(requires.path){this._completedPaths[require.path]=require}if(require.parent){require.parent.resourceObject=ret;require.parent.completed=true;(requires||require.parent._process[0])._called=true}else{this._process[require.i]._called=true}return ret},getRequires:function(require){var i=require.i,j=require.j,_process=require.parent&&require.parent._process?require.parent._process:this._process,requires=_process[require.i];return requires},deleteRequires:function(require){var i=require.i,j=require.j,parent=require.parent&&require.parent._process?require.parent:this,_process=parent._process,requires=_process[require.i];if(requires){parent._process=_process.slice(0,i).concat(_process.slice(i+1))}},checkAndSetObjectByName:function(require){var origRequire=this._completedPaths[require.path],resourceObjectPath=require.resourceObjectPath,resourceObject;if(require.type==this.constant.CSS){if(origRequire){require.completed=true;require.resourceObject=true;return true}else{if(require.completed){this._completedPaths[require.path]=true;return require.resourceObject=true}}return}if(require.resourceObject){return require.resourceObject}if(origRequire){resourceObject=origRequire.resourceObject;if(resourceObject){require.resourceObject=resourceObject;require.completed=true;return resourceObject}}else{if(!origRequire&&require.path){this._completedPaths[require.path]=require}}if(!resourceObjectPath){return}if(require&&require.callback){return}var names=resourceObjectPath.split("."),namesLength=names.length,name,obj=window;for(var j=0;j<namesLength;j++){name=names[j];if(!(j==0&&name=="window")){obj=obj&&obj[name]}}if(!obj){return}require.resourceObject=obj;require.completed=true;if(!this._completedPaths[require.path]){this._completedPaths[require.path]=require}return obj},put:function(key,value,noStorageKey){if(!this._config.storage){return}if(value&&this.isObject(value)&&!(this.isFunction(value)||this.isArray(value)||this.isString(value)||this.isNumber(value))){value=JSON.stringify(value)
    }var key=noStorageKey?key:(this._storageKey||"")+key,localStorage=window.localStorage;try{if(localStorage){localStorage.setItem(key,value)}}catch(e){}},get:function(key){var value="",localStorage=window.localStorage;if(localStorage&&!this._config.storage){return value}try{var key=(this._storageKey||"")+key;if(localStorage){value=localStorage.getItem(key)}}catch(e){}if(value&&/^\{[\s\S]*\}$/.test(value)){value=JSON.parse(value)}if(value==="undefined"||value==="null"){value=""}return value},addCache:function(requires){var pathId=requires.pathId;if(pathId){pathId=this.handlePath(pathId,requires.contextPath,requires.basePath);if(this._config.storage&&pathId&&!this.get(pathId)){this.put(pathId,{pathId:pathId,requires:requires.toString(),callback:requires.callback.toString()})}}},initAndClearStorage:function(){var localStorage=window.localStorage;if(localStorage&&this._config.storage){try{var param=this._config.param,_storageKey=this._storageKey,lastParam=localStorage.getItem(_storageKey),length=localStorage.length;localStorage.setItem(_storageKey,param||"");if(lastParam&&lastParam!=param){var matchReg=new RegExp("^"+_storageKey+".+"),key;while(length--){key=localStorage.key(length);if(key.match(matchReg)){localStorage.removeItem(key)}}}}catch(e){}}},ajax:function(options){var xmlhttp=null;if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest()}else{if(window.ActiveXObject){xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}}if(xmlhttp!=null){xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){if(xmlhttp.status==200){if(options.success){options.success(xmlhttp.responseText,xmlhttp)}}else{if(options.failed){options.failed(xmlhttp)}}}};xmlhttp.open("GET",options.url||"",true);xmlhttp.send(null)}},handleCss:function(data,url){var path="",httpPreReg=/^https?:\/\//,handledData,tailReg=/[^\/]*$/,filePathReg=/[\:]/;if(url.match(httpPreReg)){path=url.replace(tailReg,"")}else{path=(location.origin+location.pathname).replace(tailReg,"")+url.replace(tailReg,"")}handledData=data.replace(/url\s*\(([^\s;\(\)]*)\)\s*/g,function(value,url){if(url){if(url.match(httpPreReg)||url.match(filePathReg)){return value}else{var split=url.match(/^\s*(['"])?([^'"]*)/);split[1]=split[1]||"";return"url("+split[1]+path+split[2]+split[1]+")"}}else{return value}});return handledData},getRemote:function(url,success,fail){var self=this,pathId=url.replace(/\?.*/,""),storageData=self.get(pathId);if(storageData){append(storageData)}else{this.ajax({url:url,success:function(data,xmlhttp){if(pathId){self.put(pathId,data)}append(data)},failed:function(xmlhttp){fail&&fail.call(this,xmlhttp)}})}function append(data){var el=document.createElement("style");el.setAttribute("type","text/css");el.innerHTML=self.handleCss(data,url);document.head.appendChild(el);success&&success(data)}}};["Arguments","Function","String","Number","Date","RegExp","Error"].forEach(function(name){compose["is"+name]=function(obj){return toString.call(obj)==="[object "+name+"]"}});function _getJsFilePath(js_file){var _hostName=document.location.hostname;var _prd_reg=".suning.com";var _pre_reg="pre.cnsuning.com";var _sit_reg="sit.cnsuning.com";var sa_src="";if(_hostName.indexOf(_prd_reg)!=-1){sa_src="https://res.suning.cn"}else{if(_hostName.indexOf(_pre_reg)!=-1){sa_src="https://preres.suning.cn"}else{if(_hostName.indexOf(_sit_reg)!=-1){sa_src="https://sitsslres.suning.com"}else{sa_src="https://res.suning.cn"}}}sa_src=sa_src+"/javascript/sn_da/"+js_file;return sa_src}compose.require("scripts/common/monitor.js",[_getJsFilePath("sa_simple.js"),_getJsFilePath("sa_click.js")],function(){var sa;if(!sa){sa={}}if(!sa.click){sa.click={}}(function(){var u=/^\w*?.suning.com$/,t=document.location.hostname,h=(("https:"==document.location.protocol)?"https://":"http://"),p=i(),b="|",c=location.href,n=m(q(c));function r(aa,N){try{var Z=aa.name?m(aa.name):"name undefined";if(Z=="name undefined"){var ab=aa.attributes.name;if(ab!=undefined&&ab!=null){Z=ab.value?m(ab.value):"name undefined"}}if(N!=undefined&&N!=null&&N!=""){var K=aa.attributes[N];if(K!=undefined&&K!=null){Z=K.value?m(K.value):N+" undefined"}}var O=aa.id?m(aa.id):"id undefined",R=new Array(),A=(f(aa,R),R)?m(R.join("").replace(/\s|\|/ig,"")):"text undefined",U=(U=document.getElementById("resourceType"))?U.value:"",B=O+b+Z+b+A,S=(S=document.getElementById("errorCode"))?S.value:"",X=h+p+"/ajaxClick.gif",z=v(),k="_snck";l(k,z,"/","","");var Y=d();var E=typeof sn=="object"?sn.cityId:"can not get cityId",J=z+b+Y+b+B+b+n,W=aa.href?aa.href:"",I=(W?x(W):"-"),L=document.getElementById("URLPattern"),Q=(L?L.value:"");var D="";var G=o("logonStatus");if(G!=undefined&&G!=null){D=G}var F="";var j=o("_snma");if(j!=undefined&&j!=null&&j.indexOf("|")>=0){try{F=j.split("|")[1]}catch(V){}}var C="";var y=o("idsLoginUserIdLastTime");if(y!=undefined&&y!=null){C=y}var T="";var P=o("custno");if(P!=undefined&&P!=null){T=P}var M="";var ac=o("_snmb");if(ac!=undefined&&ac!=null&&ac.indexOf("|")>=0){try{M=ac.split("|")[0]}catch(V){}}var H=X+"?_snmk="+J+"&_snme="+S+"&_type="+U+"&_cId="+E+"&_sid="+I+"&urlPattern="+Q+"&vid="+F+"&lu="+C+"&sid="+M+"&mid="+T+"&ls="+D;
    w(H)}catch(V){}}function d(){if(!sa.pvId){sa.pvId=v()}return sa.pvId}function v(){try{var k=new Date(),j=Math.round(100000*Math.random()),z=k.getTime().toString().concat(j);return z}catch(y){}}function o(k){var j=document.cookie.split("; ");for(var y=0;y<j.length;y++){var z=j[y].split("=");if(z[0]==k){return unescape(z[1])}}}function w(j){var y="log_"+(new Date()).getTime();var k=window[y]=new Image();k.onload=(k.onerror=function(){window[y]=null});k.src=j+"&iId="+y;k=null}function i(){if(u.test(t)){return"click.suning.cn/sa"}else{return"clicksit.suning.cn/sa"}}function e(){return document.domain}function l(k,j,D,C,B){try{var A=k+"="+escape(j);if(C!=""){var z=new Date();z.setTime(z.getTime()+C);A+=";expires="+z.toGMTString()}if(D!=""){A+=";path="+D}var y=e();if(y.indexOf(".suning.com")!=-1){A+=";domain=.suning.com"}else{if(y.indexOf(".cnsuning.com")!=-1){A+=";domain=.cnsuning.com"}else{A+=";domain="+B}}document.cookie=A}catch(B){}}function x(k){var j="-";if(!a(k)){j=g(k,"tid","&")}return j}function q(j){try{if(j.length>301){j=j.substring(0,300)}while(j.indexOf(b)!=-1){j=j.replace(b,"--")}return j}catch(k){}}function f(z,k){try{if(z.nodeType==3){k.push(z.nodeValue)}else{if(z.nodeType==1){for(var j=z.firstChild;j!=null;j=j.nextSibling){f(j,k)}}}}catch(y){}}function m(j){return j!=null?encodeURIComponent(j):""}function g(y,k,B){try{var A="-",j;if(!a(y)&&!a(k)&&!a(B)){j=y.indexOf(k);if(j>-1){var z=y.indexOf(B,j);if(z<0){z=y.length}A=y.substring(j+k.length+1,z)}}return A}catch(z){}}function a(j){return(undefined==j||""==j||"-"==j)}var s=sa.click;s.sendDatasIndex=r})();var lastPageRecord;return{addPv:function(fromUrl,currentUrl,currentPageTitle){_ssaSendPvData=window._ssaSendPvData;if(_ssaSendPvData&&typeof _ssaSendPvData=="function"){try{fromUrl=fromUrl||this.getFromUrl();lastPageRecord=currentUrl=currentUrl||this.getCurrentUrl();currentPageTitle=currentPageTitle||document.querySelector("title").innerText.trim();_ssaSendPvData(fromUrl,currentUrl,currentPageTitle)}catch(e){}}},addClick:function(name,currentUrl){currentUrl=currentUrl||this.getCurrentUrl();if(name){var selector="[name^="+name+"]",clicks=$(selector);if(clicks.size()){clicks.live("click",function(){try{window.sa.click.sendClickData(this,currentUrl)}catch(e){}})}}},getUrl:function(path){var pathname=window.location.pathname,search=window.location.search,origin=window.location.origin;return origin+pathname+(path?"/"+path:"")+(search?search:"")},getCurrentUrl:function(){return this.getUrl(eBase.PageRouter.getFragment().replace(/\/.*/,""))},getFromUrl:function(){return lastPageRecord||document.referrer}}});